# DuckDB Recharts Dashboard - プロジェクト概要

## 🎯 プロジェクトの目的

このプロジェクトは、WebAssembly版DuckDBとRechartsを使用したインタラクティブな分析ダッシュボードです。ブラウザ内でSQLクエリを実行し、リアルタイムでデータを可視化することができます。

## 🏗️ アーキテクチャ

### 技術スタック
- **フロントエンド**: Next.js 14.1.0 + React 18.2.0 + TypeScript 5.3.3
- **データベース**: DuckDB WASM 1.28.0（ブラウザ内SQL実行）
- **グラフ描画**: Recharts 2.10.4
- **スタイリング**: CSS-in-JS（styled jsx）

### 主要コンポーネント

1. **DuckDB統合**
   - CDN（jsdelivr）からWASMファイルを自動取得
   - Web Worker非対応（COEPヘッダー制約のため）
   - BigInt→Number自動変換でRecharts互換性確保

2. **3つの実装バージョン**
   - **通常版** (`/`): ページロード時に自動初期化
   - **遅延読み込み版** (`/lazy`): ユーザーアクション後に初期化
   - **最適化版** (`/optimized`): バックグラウンドプリフェッチ付き

3. **データ可視化**
   - 折れ線グラフ: カテゴリ別時系列推移
   - 棒グラフ: カテゴリ別・日別集計
   - 円グラフ: カテゴリ別構成比
   - 期間フィルタ機能

## 📂 ファイル構成

```
src/
├── components/       # UIコンポーネント
├── hooks/           # カスタムフック（DuckDB操作）
└── lib/             # DuckDB実装ロジック
    ├── duckdb-public.ts    # メイン実装（CDN読み込み）
    ├── duckdb-lazy.ts      # 遅延読み込み版
    └── preload-wasm.ts     # プリフェッチ機能
```

## 🔑 実装のポイント

1. **CORS対策**: WorkerファイルはAPIプロキシ経由で配信
2. **型安全性**: TypeScriptで完全型付け
3. **パフォーマンス**: 22MBのWASMファイルの読み込み最適化
4. **レスポンシブ**: モバイル対応UI

## 🚀 今後の改善案

1. Service Workerでのキャッシュ管理
2. より小さいWASMバンドルの使用検討
3. サーバーサイドでのデータ前処理オプション
4. リアルタイムデータストリーミング対応